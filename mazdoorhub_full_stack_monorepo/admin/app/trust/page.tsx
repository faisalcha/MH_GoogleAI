'use client'; import {useEffect,useState} from 'react'; import {ApiBar,useApiBase} from '../../components/common'; export default function Page(){ const api=useApiBase(); const [items,setItems]=useState<any[]>([]); const [status,setStatus]=useState('RESPONDED'); const load=async()=>{ const r=await fetch(api+'/trust/admin/references?status='+status); setItems(await r.json());}; useEffect(()=>{load();},[api,status]); const verify=async(id:string,ok:boolean)=>{ await fetch(api+'/trust/admin/reference/'+id+'/verify',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({verify:ok})}); await load(); }; return (<div style={{padding:20}}><ApiBar title='Trust'/><select value={status} onChange={e=>setStatus(e.target.value)}><option value='RESPONDED'>RESPONDED</option><option value='SENT'>SENT</option><option value='PENDING'>PENDING</option></select><button onClick={load}>Refresh</button><table border={1} cellPadding={8} style={{width:'100%',borderCollapse:'collapse'}}><thead><tr><th>ID</th><th>Worker</th><th>Ref</th><th>Phone</th><th>Status</th><th>Actions</th></tr></thead><tbody>{items.map(it=>(<tr key={it.id}><td>{it.id}</td><td>{it.worker_user_id}</td><td>{it.ref_name}</td><td>{it.ref_phone}</td><td>{it.status}</td><td><button onClick={()=>verify(it.id,true)}>Verify</button><button onClick={()=>verify(it.id,false)} style={{marginLeft:8}}>Reject</button></td></tr>))}</tbody></table></div>); }